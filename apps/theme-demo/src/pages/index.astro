---
import HomePage from '@astro-md-theme/core/templates/HomePage.astro';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

const blogPosts = await getCollection('blog');
const posts = blogPosts
  .sort((a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) => 
    b.data.pubDate.getTime() - a.data.pubDate.getTime()
  )
  .slice(0, 3) // Show only latest 3 posts on homepage
  .map((post: CollectionEntry<'blog'>) => ({
    title: post.data.title,
    slug: post.slug,
    excerpt: post.data.excerpt,
    date: post.data.pubDate,
    category: post.data.category,
    coverImage: post.data.coverImage,
  }));
---

<HomePage
  siteTitle="My Space."
  siteDescription="A minimalist blog theme demo"
  authorName="Demo Author"
  authorBio="Programmer & Street Photographer."
  posts={posts}
/>
